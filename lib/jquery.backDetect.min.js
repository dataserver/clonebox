(function(a){var b=a,c="undefined"!=typeof window&&window,d={frameLoaded:0,frameTry:0,frameTime:0,frameDetect:null,frameSrc:null,frameCallBack:null,frameThis:null,frameNavigator:window.navigator.userAgent,frameDelay:0,frameDataSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};b.fn.backDetect=function(a,c){d.frameThis=this,d.frameCallBack=a,null!==c&&(d.frameDelay=c),-1<d.frameNavigator.indexOf("MSIE ")||-1<d.frameNavigator.indexOf("Trident")?setTimeout(function(){b("<iframe src=\""+d.frameDataSrc+"?loading\" style=\"display:none;\" id=\"backDetectFrame\" onload=\"jQuery.fn.frameInit();\"\"></iframe>").appendTo(d.frameThis)},d.frameDelay):setTimeout(function(){b("<iframe src='about:blank?loading' style='display:none;' id='backDetectFrame' onload='jQuery.fn.frameInit();'></iframe>").appendTo(d.frameThis)},d.frameDelay)},b.fn.frameInit=function(){d.frameDetect=document.getElementById("backDetectFrame"),1<d.frameLoaded&&2===d.frameLoaded&&(d.frameCallBack.call(this),c.history.go(-1)),d.frameLoaded+=1,1===d.frameLoaded&&(d.frameTime=setTimeout(function(){a.fn.setupFrames()},500))},b.fn.setupFrames=function(){clearTimeout(d.frameTime),d.frameSrc=d.frameDetect.src,1===d.frameLoaded&&-1===d.frameSrc.indexOf("historyLoaded")&&(-1<d.frameNavigator.indexOf("MSIE ")||-1<d.frameNavigator.indexOf("Trident")?d.frameDetect.src=d.frameDataSrc+"?historyLoaded":d.frameDetect.src="about:blank?historyLoaded")}})(jQuery);